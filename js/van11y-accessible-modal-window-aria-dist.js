"use strict";!function(t){var e="js-modal",a="label_modal_",o="data-modal-background-click",d="data-modal-prefix-class",l="data-modal-text",n="data-modal-content-id",i="data-modal-describedby-id",r="data-modal-title",s="data-modal-focus-toid",c="data-modal-close-text",u="data-modal-close-title",m="data-modal-close-img",b="js-modal-close",f="js-modal-close",g="data-content-back-id",v="data-focus-back",A="js-modal-content",C="a[href], area[href], input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]",p="js-modal-page",h="js-modal",y="js-modal-overlay",k="Close modal",x="data-background-click",I="no-scroll",L="aria-hidden",j="aria-haspopup",T="dialog",E=function(e){return t.getElementById(e)},B=function(t,e){t.classList?t.classList.add(e):t.className+=" "+e},M=function(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")},P=function(t,e){return t.classList?t.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(t.className)};function D(t,e){for("string"==typeof e&&(e=document.createElement(e)),t.appendChild(e);t.firstChild!==e;)e.appendChild(t.firstChild)}function _(t){t.parentNode.removeChild(t)}var w=function(t,e){for(var a=!1,o=t.parentNode;o&&!1===a;)!0===P(o,e)?a=!0:o=o.parentNode;return!0===a?o.getAttribute("id"):""},H=function(t){var e=t.text||k;return'<span\n                    id="js-modal-overlay"\n                    class="'+(t.prefixClass+"modal-overlay")+'"\n                    '+'data-background-click="'+("disabled"===t.backgroundEnabled?"disabled":"enabled")+'"\n                    title="'+e+'"\n                    >\n                    <span class="invisible">'+e+"</span>\n                  </span>"},N=function(t){var e=t.modalPrefixClass+"modal",a=t.modalPrefixClass+"modal__wrapper",o=t.modalPrefixClass+"modal-close",d=t.modalCloseImgPath?'<img src="'+t.modalCloseImgPath+'" alt="'+t.modalCloseText+'" class="'+t.modalPrefixClass+'modal__closeimg" />':'<span class="'+t.modalPrefixClass+'modal-close__text">\n                                          '+t.modalCloseText+"\n                                         </span>",l=t.modalPrefixClass+"modal__content",n=t.modalPrefixClass+"modal-title",i=""!==t.modalTitle?'<h1 id="modal-title" class="'+n+'">\n                                          '+t.modalTitle+"\n                                         </h1>":"",r='<button type="button" class="js-modal-close '+o+'" id="'+'js-modal-close" title="'+t.modalCloseTitle+'" '+'data-content-back-id="'+t.modalContentId+'" '+'data-focus-back="'+t.modalFocusBackId+'">\n                               '+d+"\n                              </button>",s=t.modalText,c=""!==t.modalDescribedById?'aria-describedby="'+t.modalDescribedById+'"':"";if(""===s&&t.modalContentId){var u=E(t.modalContentId);u&&(s='<div id="js-modal-content">\n                              '+u.innerHTML+"\n                             </div",u.innerHTML="")}return'<dialog id="js-modal" class="'+e+'" role="dialog" '+c+' open aria-labelledby="'+'modal-title">\n                    <div role="document" class="'+a+'">\n                      '+r+'\n                      <div class="'+l+'">\n                        '+i+"\n                        "+s+"\n                      </div>\n                    </div>\n                  </dialog>"},S=function(t){if(_(t.modal),_(t.overlay),""!==t.contentBackId){var e=E(t.contentBackId);e&&(e.innerHTML=t.modalContent)}if(t.modalFocusBackId){var a=E(t.modalFocusBackId);a&&a.focus()}},q=function(){var e=arguments.length<=0||void 0===arguments[0]?t:arguments[0];return[].slice.call(e.querySelectorAll(".js-modal"))},F=function(_){var F=arguments.length<=1||void 0===arguments[1]||arguments[1];q(_).forEach((function(e){var o=Math.random().toString(32).slice(2,12),d=E(p),l=t.querySelector("body");if(e.setAttribute("id",a+o),e.setAttribute(j,T),null===d||0===d.length){var n=t.createElement("DIV");n.setAttribute("id",p),D(l,n)}})),F&&["click","keydown"].forEach((function(a){t.body.addEventListener(a,(function(j){var T=w(j.target,e);if((!0===P(j.target,e)||""!==T)&&"click"===a){var D=t.querySelector("body"),_=""!==T?E(T):j.target,q=!0===_.hasAttribute(d)?_.getAttribute(d)+"-":"",F=!0===_.hasAttribute(l)?_.getAttribute(l):"",O=!0===_.hasAttribute(n)?_.getAttribute(n):"",R=!0===_.hasAttribute(i)?_.getAttribute(i):"",$=!0===_.hasAttribute(r)?_.getAttribute(r):"",K=!0===_.hasAttribute(c)?_.getAttribute(c):k,V=!0===_.hasAttribute(u)?_.getAttribute(u):K,W=!0===_.hasAttribute(m)?_.getAttribute(m):"",z=!0===_.hasAttribute(o)?_.getAttribute(o):"",G=!0===_.hasAttribute(s)?_.getAttribute(s):"",J=E(p);D.insertAdjacentHTML("beforeEnd",H({text:V,backgroundEnabled:z,prefixClass:q})),D.insertAdjacentHTML("beforeEnd",N({modalText:F,modalPrefixClass:q,backgroundEnabled:O,modalTitle:$,modalCloseText:K,modalCloseTitle:V,modalCloseImgPath:W,modalContentId:O,modalDescribedById:R,modalFocusBackId:_.getAttribute("id")})),J.setAttribute(L,"true"),B(D,I);var Q=E(b);if(""!==G){var U=E(G);U?U.focus():Q.focus()}else Q.focus();j.preventDefault()}var X=w(j.target,f);if((j.target.getAttribute("id")===b||""!==X||j.target.getAttribute("id")===y||!0===P(j.target,f))&&"click"===a){D=t.querySelector("body"),J=E(p);var Y=E(h),Z=E(A)?E(A).innerHTML:"",tt=E(y),et=(ot=E(b)).getAttribute(v),at=ot.getAttribute(g);z=tt.getAttribute(x);j.target.getAttribute("id")===y&&"disabled"===z||(S({modal:Y,modalContent:Z,overlay:tt,modalFocusBackId:et,contentBackId:at,backgroundEnabled:z,fromId:j.target.getAttribute("id")}),J.removeAttribute(L),M(D,I))}if(E(h)&&"keydown"===a){D=t.querySelector("body"),J=E(p),Y=E(h),Z=E(A)?E(A).innerHTML:"",tt=E(y),et=(ot=E(b)).getAttribute(v),at=ot.getAttribute(g);var ot,dt=[].slice.call(Y.querySelectorAll(C));27===j.keyCode&&(S({modal:Y,modalContent:Z,overlay:tt,modalFocusBackId:et,contentBackId:at}),J.removeAttribute(L),M(D,I)),9===j.keyCode&&dt.indexOf(j.target)>=0&&(j.shiftKey?j.target===dt[0]&&(dt[dt.length-1].focus(),j.preventDefault()):j.target===dt[dt.length-1]&&(dt[0].focus(),j.preventDefault())),9===j.keyCode&&-1===dt.indexOf(j.target)&&(j.preventDefault(),dt[0].focus())}}),!0)}))};document.addEventListener("DOMContentLoaded",(function t(){F(),document.removeEventListener("DOMContentLoaded",t)})),window.van11yAccessibleModalWindowAria=F}(document);
//# sourceMappingURL=van11y-accessible-modal-window-aria-dist.js.map